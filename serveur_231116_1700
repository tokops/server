[{"id":"d491e624.e1f9c8","type":"function","z":"97484b8.73501b8","name":"parsing database payload","func":"\n/*\nmsg.payload[0] = JSON.stringify(msg.payload[0]);\nmsg.payload[0] = msg.payload[0].replace('{\\\"rfid_tag\\\":','');\nmsg.payload[0] = msg.payload[0].replace('}','');*/\n//changer le type de msg.payload[0], actuellement strig \"1\", dans le bon type à comparer. (en fonction du type envoyé par l'arduino)\n\nmsg.rfid = [];\nmsg.objet = [];\n\nfor (var i = 0; i <= 2; i++) {\n\nmsg.payload[i] = JSON.stringify(msg.payload[i]);\nmsg.payload[i] = msg.payload[i].replace('{\\\"rfid_tag\\\":','');\nmsg.rfid[i] = msg.payload[i].match(/.+?(?=,)/);\nmsg.payload[i] = msg.payload[i].replace('/.+?(?=,)/)','');\nmsg.payload[i] = msg.payload[i].replace(',\\\"obj_name\\\":\\\"','');\nmsg.objet[i] = msg.payload[i].match(/.+?(?=\")/);\n\n\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":900,"y":168,"wires":[["6d41ebb.faeea14"]]}]